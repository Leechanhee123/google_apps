<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Google Apps Script 기반 리드 수집</title>
  <link rel="stylesheet" href="css/styles.css" />
</head>
<body>
  <!-- Loading Overlay -->
  <div id="loading-overlay" class="loading-overlay">
    <div class="loading-spinner"></div>
    <p>연결 중...</p>
  </div>

  <nav class="navbar">
    <span class="brand" id="brand-name">스프레드시트 자동화</span>
    <div class="nav-links">
      <a href="#hero" class="nav-link">홈</a>
      <a href="#features" class="nav-link">기능</a>
      <a href="#admin" class="nav-link">관리자</a>
    </div>
  </nav>

  <header class="hero" id="hero">
    <div class="hero-content">
      <h1 id="landing-title">구글 시트로 간편하게 리드를 모으고 관리하세요</h1>
      <p id="landing-subtitle">전화번호와 관심 정보를 남겨 주시면, 맞춤 상담을 준비해 바로 연락드립니다.</p>

      <div class="form-container">
        <form id="lead-form" class="lead-form">
          <div class="form-group">
            <label for="name">이름 *</label>
            <input type="text" id="name" name="name" required />
          </div>

          <div class="form-group">
            <label for="phone">연락처 *</label>
            <input type="tel" id="phone" name="phone" placeholder="010-1234-5678" required />
            <small class="form-hint">하이픈(-)을 포함해서 입력해주세요</small>
          </div>

          <div class="form-group">
            <label for="service">관심 서비스 *</label>
            <select id="service" name="service" required>
              <option value="">관심 서비스를 선택하세요</option>
            </select>
          </div>

          <div class="form-group">
            <label for="contactPreference">희망 상담 방식 *</label>
            <select id="contactPreference" name="contactPreference" required>
              <option value="">희망 상담 방식을 선택하세요</option>
            </select>
          </div>

          <div class="form-group">
            <label for="memo">추가로 궁금한 내용을 알려주세요</label>
            <textarea id="memo" name="memo" rows="4" placeholder="원하시는 일정이나 참고 사항이 있다면 작성해주세요."></textarea>
          </div>

          <button type="submit" class="submit-btn">
            <span class="btn-text">신청하기</span>
            <span class="btn-spinner" style="display: none;">⏳</span>
          </button>
        </form>

        <div id="form-status" class="form-status" role="status"></div>
      </div>
    </div>
  </header>

  <section class="features" id="features">
    <div class="container">
      <h2>주요 기능</h2>
      <div class="feature-grid" id="feature-grid">
        <!-- 동적으로 로드됩니다 -->
      </div>
    </div>
  </section>

  <section class="admin-section" id="admin">
    <div class="container">
      <h2>관리자 기능</h2>
      <div class="admin-controls">
        <button id="load-data-btn" class="admin-btn">데이터 불러오기</button>
        <button id="refresh-btn" class="admin-btn secondary">새로고침</button>
        <span id="data-count" class="data-count"></span>
      </div>

      <div class="admin-content">
        <div id="data-table-container" class="table-container">
          <div class="table-placeholder">
            <p>👆 '데이터 불러오기' 버튼을 클릭하여 저장된 리드를 확인하세요</p>
          </div>
        </div>
      </div>
    </div>
  </section>

  <section class="api-info">
    <div class="container">
      <h3>🔧 Apps Script API 상태</h3>
      <div class="api-status">
        <div id="api-status-indicator" class="status-indicator">
          <span class="status-dot"></span>
          <span class="status-text">연결 확인 중...</span>
        </div>
        <button id="test-api-btn" class="test-btn">API 연결 테스트</button>
      </div>
      <div class="api-config">
        <h4>현재 설정:</h4>
        <p><strong>Apps Script URL:</strong> <span id="current-api-url">설정되지 않음</span></p>
        <div class="config-input">
          <label for="api-url-input">Apps Script 웹 앱 URL:</label>
          <input type="url" id="api-url-input" placeholder="https://script.google.com/macros/s/.../exec" />
          <button id="save-url-btn" class="save-btn">저장</button>
        </div>
      </div>
    </div>
  </section>

  <footer class="footer">
    <small>© <span id="year"></span> <span id="footer-text">스프레드시트 자동화. 모든 권리 보유.</span></small>
  </footer>

  <script src="js/config.js"></script>
  <script src="js/api.js"></script>
  <script src="js/app.js"></script>
</body>
</html>